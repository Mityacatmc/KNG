{"version":3,"sources":["../../../src/lib/dom.tsx"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM } from '@vkontakte/vkjs';\nexport { canUseDOM, canUseEventListeners, onDOMLoaded } from '@vkontakte/vkjs';\n\nexport interface DOMContextInterface {\n  /**\n   * @ignore\n   */\n  window?: Window;\n  /**\n   * @ignore\n   */\n  document?: Document;\n}\n\nexport type DOMProps = DOMContextInterface;\n\n/* eslint-disable no-restricted-globals */\nexport const getDOM = () => ({\n  window: canUseDOM ? window : undefined,\n  document: canUseDOM ? document : undefined,\n});\n/* eslint-enable no-restricted-globals */\n\nexport const DOMContext = React.createContext<DOMContextInterface>(getDOM());\n\nexport const useDOM = () => {\n  return React.useContext(DOMContext);\n};\n\nexport function withDOM<Props>(\n  Component: React.ComponentType<Props & DOMProps>,\n): React.ComponentType<Props> {\n  const WithDOM = (props: Props) => {\n    const dom = useDOM();\n    return <Component {...props} {...dom} />;\n  };\n  return WithDOM;\n}\n\nexport function blurActiveElement(document: Document | undefined) {\n  if (document && document.activeElement) {\n    (document.activeElement as HTMLElement).blur();\n  }\n}\n"],"names":["canUseDOM","canUseEventListeners","onDOMLoaded","getDOM","DOMContext","useDOM","withDOM","blurActiveElement","window","undefined","document","React","createContext","useContext","Component","WithDOM","props","dom","activeElement","blur"],"mappings":";;;;;;;;;;;IAESA,SAAS;eAATA,eAAS;;IAAEC,oBAAoB;eAApBA,0BAAoB;;IAAEC,WAAW;eAAXA,iBAAW;;IAgBxCC,MAAM;eAANA;;IAMAC,UAAU;eAAVA;;IAEAC,MAAM;eAANA;;IAIGC,OAAO;eAAPA;;IAUAC,iBAAiB;eAAjBA;;;;;+DAxCO;oBACG;AAiBnB,IAAMJ,SAAS;WAAO;QAC3BK,QAAQR,eAAS,GAAGQ,SAASC;QAC7BC,UAAUV,eAAS,GAAGU,WAAWD;IACnC;;AAGO,IAAML,2BAAaO,OAAMC,aAAa,CAAsBT;AAE5D,IAAME,SAAS;IACpB,OAAOM,OAAME,UAAU,CAACT;AAC1B;AAEO,SAASE,QACdQ,SAAgD;IAEhD,IAAMC,UAAU,SAACC;QACf,IAAMC,MAAMZ;QACZ,qBAAO,qBAACS,gCAAcE,OAAWC;IACnC;IACA,OAAOF;AACT;AAEO,SAASR,kBAAkBG,SAA8B;IAC9D,IAAIA,aAAYA,UAASQ,aAAa,EAAE;QACrCR,UAASQ,aAAa,CAAiBC,IAAI;IAC9C;AACF"}