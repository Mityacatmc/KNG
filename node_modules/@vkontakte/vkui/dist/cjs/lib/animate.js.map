{"version":3,"sources":["../../../src/lib/animate.ts"],"sourcesContent":["import { canUseDOM } from './dom';\n\n/**\n * Функция для js анимации\n * @param {number} duration\n * @param {function} timing тайминг функция анимации\n * @param {function} draw коллбэк, в который прокидывается прогресс [0, 1]\n * @returns {void}\n */\nexport type TimingInterface = (timeFraction: number) => number;\n\nexport type DrawInterface = (progress: number) => void;\n\nexport interface AnimateArgumentsInterface {\n  duration: number;\n  timing: TimingInterface;\n  draw: DrawInterface;\n}\n\nexport function animate({ duration, timing, draw }: AnimateArgumentsInterface): void {\n  if (!canUseDOM) {\n    return;\n  }\n\n  const start = performance.now();\n\n  requestAnimationFrame(function animate(time: number): void {\n    let timeFraction = (time - start) / duration;\n\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n\n    const progress = timing(timeFraction);\n\n    draw(progress);\n\n    if (timeFraction < 1) {\n      requestAnimationFrame(animate);\n    }\n  });\n}\n"],"names":["animate","duration","timing","draw","canUseDOM","start","performance","now","requestAnimationFrame","time","timeFraction","progress"],"mappings":";;;;+BAmBgBA;;;eAAAA;;;mBAnBU;AAmBnB,SAASA,QAAQ,KAAqD;QAAnDC,WAAF,MAAEA,UAAUC,SAAZ,MAAYA,QAAQC,OAApB,MAAoBA;IAC1C,IAAI,CAACC,cAAS,EAAE;QACd;IACF;IAEA,IAAMC,QAAQC,YAAYC,GAAG;IAE7BC,sBAAsB,SAASR,QAAQS,IAAY;QACjD,IAAIC,eAAe,AAACD,CAAAA,OAAOJ,KAAI,IAAKJ;QAEpC,IAAIS,eAAe,GAAG;YACpBA,eAAe;QACjB;QAEA,IAAMC,WAAWT,OAAOQ;QAExBP,KAAKQ;QAEL,IAAID,eAAe,GAAG;YACpBF,sBAAsBR;QACxB;IACF;AACF"}