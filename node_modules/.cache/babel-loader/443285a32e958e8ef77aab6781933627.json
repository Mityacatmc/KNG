{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { clamp } from \"../../helpers/math\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { BaseGallery } from \"../BaseGallery/BaseGallery\";\n/**\n * @see https://vkcom.github.io/VKUI/#/Gallery\n */\n\nexport var Gallery = function Gallery(_param) {\n  var _param_initialSlideIndex = _param.initialSlideIndex,\n      initialSlideIndex = _param_initialSlideIndex === void 0 ? 0 : _param_initialSlideIndex,\n      children = _param.children,\n      _param_timeout = _param.timeout,\n      timeout = _param_timeout === void 0 ? 0 : _param_timeout,\n      onChange = _param.onChange,\n      bullets = _param.bullets,\n      props = _object_without_properties(_param, [\"initialSlideIndex\", \"children\", \"timeout\", \"onChange\", \"bullets\"]);\n\n  var _React_useState = _sliced_to_array(React.useState(initialSlideIndex), 2),\n      localSlideIndex = _React_useState[0],\n      setSlideIndex = _React_useState[1];\n\n  var isControlled = typeof props.slideIndex === \"number\";\n\n  var _props_slideIndex;\n\n  var slideIndex = isControlled ? (_props_slideIndex = props.slideIndex) !== null && _props_slideIndex !== void 0 ? _props_slideIndex : 0 : localSlideIndex;\n  var isDraggable = !isControlled || Boolean(onChange);\n  var slides = React.useMemo(function () {\n    return React.Children.toArray(children).filter(function (item) {\n      return Boolean(item);\n    });\n  }, [children]);\n  var childCount = slides.length;\n  var handleChange = React.useCallback(function (current) {\n    if (current === slideIndex) {\n      return;\n    }\n\n    !isControlled && setSlideIndex(current);\n    onChange && onChange(current);\n  }, [isControlled, onChange, slideIndex]);\n  var autoplay = useTimeout(function () {\n    return handleChange((slideIndex + 1) % childCount);\n  }, timeout);\n  React.useEffect(function () {\n    return timeout ? autoplay.set() : autoplay.clear();\n  }, [timeout, slideIndex, autoplay]); // prevent invalid slideIndex\n  // any slide index is invalid with no slides, just keep it as is\n\n  var safeSlideIndex = childCount > 0 ? clamp(slideIndex, 0, childCount - 1) : slideIndex; // notify parent in controlled mode\n\n  React.useEffect(function () {\n    if (onChange && safeSlideIndex !== slideIndex) {\n      onChange(safeSlideIndex);\n    }\n\n    setSlideIndex(safeSlideIndex);\n  }, [onChange, safeSlideIndex, slideIndex]);\n  return /*#__PURE__*/React.createElement(BaseGallery, _object_spread_props(_object_spread({\n    isDraggable: isDraggable\n  }, props), {\n    bullets: childCount > 0 && bullets,\n    slideIndex: safeSlideIndex,\n    onChange: handleChange\n  }), slides);\n};","map":{"version":3,"mappings":";;;;AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,KAAT,QAAsB,oBAAtB;AACA,SAASC,UAAT,QAA2B,wBAA3B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AAQA;;;;AAGA,OAAO,IAAMC,UAAU,SAAVA,OAAU;wCACrBC;MAAAA,0DAAoB,CAApBA,GAAoBC;MACpBC;MAAAA,wBACAC;MAAAA,sCAAU,CAAVA,GAAUC;MACVC;MACAC;MACGC,4CALHP,mBAKGO,EAJHL,UAIGK,EAHHJ,SAGGI,EAFHF,UAEGE,EADHD,SACGC;;EAEH,IAAyCZ,yCAAMa,QAANb,CAAeK,iBAAfL,GAAeK,CAAfL,CAAzC;EAAA,IAAOc,kBAAkCd,kBAAzC;EAAA,IAAwBe,gBAAiBf,kBAAzC;;EACA,IAAMgB,eAAe,OAAOJ,MAAMK,UAAb,KAA4B,QAAjD;;MACkCL;;EAAlC,IAAMK,aAAaD,eAAeJ,2BAAMK,UAANL,MAAgB,IAAhBA,uDAAoB,CAAnCI,GAAuCF,eAA1D;EACA,IAAMI,cAAc,CAACF,YAAD,IAAiBG,QAAQT,QAARS,CAArC;EACA,IAAMC,SAASpB,MAAMqB,OAANrB,CACb;WAAMA,MAAMsB,QAANtB,CAAeuB,OAAfvB,CAAuBO,QAAvBP,EAAiCwB,MAAjCxB,CAAwC,UAACyB,IAAD,EAACA;aAASN,QAAQM,IAARN;KAAlDnB;GADOA,EAEb,CAACO,QAAD,CAFaP,CAAf;EAIA,IAAM0B,aAAaN,OAAOO,MAA1B;EAEA,IAAMC,eAAyC5B,MAAM6B,WAAN7B,CAC7C,UAAC8B,OAAD,EAACA;IACC,IAAIA,YAAYb,UAAhB,EAA4B;MAC1B;IACF;;IACA,CAACD,YAAD,IAAiBD,cAAce,OAAdf,CAAjB;IACAL,YAAYA,SAASoB,OAATpB,CAAZA;EACF,CAP6CV,EAQ7C,CAACgB,YAAD,EAAeN,QAAf,EAAyBO,UAAzB,CAR6CjB,CAA/C;EAWA,IAAM+B,WAAW7B,WAAW;WAAM0B,aAAa,CAACX,aAAa,CAAd,IAAmBS,UAAhCE;GAAjB1B,EAA8DM,OAA9DN,CAAjB;EACAF,MAAMgC,SAANhC,CACE;WAAOQ,UAAUuB,SAASE,GAATF,EAAVvB,GAA2BuB,SAASG,KAATH;GADpC/B,EAEE,CAACQ,OAAD,EAAUS,UAAV,EAAsBc,QAAtB,CAFF/B,EA9BqB,CAmCrB;EACA;;EACA,IAAMmC,iBAAiBT,aAAa,CAAbA,GAAiBzB,MAAMgB,UAANhB,EAAkB,CAAlBA,EAAqByB,aAAa,CAAlCzB,CAAjByB,GAAwDT,UAA/E,CArCqB,CAsCrB;;EACAjB,MAAMgC,SAANhC,CAAgB;IACd,IAAIU,YAAYyB,mBAAmBlB,UAAnC,EAA+C;MAC7CP,SAASyB,cAATzB;IACF;;IACAK,cAAcoB,cAAdpB;EACF,CALAf,EAKG,CAACU,QAAD,EAAWyB,cAAX,EAA2BlB,UAA3B,CALHjB;EAOA,oBACEA,oBAACG,WAAD,EAACA;IACCe,aAAaA;EADdf,GAEKS,KAFLT,GAEKS;IACJD,SAASe,aAAa,CAAbA,IAAkBf,OADvBC;IAEJK,YAAYkB,cAFRvB;IAGJF,UAAUkB;EAHNhB,CAFLT,CAAD,EAOGiB,MAPH,CADF;AAWF,CAzDO","names":["React","clamp","useTimeout","BaseGallery","Gallery","initialSlideIndex","_param_initialSlideIndex","children","timeout","_param_timeout","onChange","bullets","props","useState","localSlideIndex","setSlideIndex","isControlled","slideIndex","isDraggable","Boolean","slides","useMemo","Children","toArray","filter","item","childCount","length","handleChange","useCallback","current","autoplay","useEffect","set","clear","safeSlideIndex"],"sources":["C:\\Users\\Ð¯\\Desktop\\myproject\\vk-miniapps\\Koto-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Gallery\\Gallery.tsx"],"sourcesContent":["import * as React from 'react';\nimport { clamp } from '../../helpers/math';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { BaseGallery } from '../BaseGallery/BaseGallery';\nimport { BaseGalleryProps } from '../BaseGallery/types';\n\nexport interface GalleryProps extends BaseGalleryProps {\n  initialSlideIndex?: number;\n  timeout?: number;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Gallery\n */\nexport const Gallery = ({\n  initialSlideIndex = 0,\n  children,\n  timeout = 0,\n  onChange,\n  bullets,\n  ...props\n}: GalleryProps) => {\n  const [localSlideIndex, setSlideIndex] = React.useState(initialSlideIndex);\n  const isControlled = typeof props.slideIndex === 'number';\n  const slideIndex = isControlled ? props.slideIndex ?? 0 : localSlideIndex;\n  const isDraggable = !isControlled || Boolean(onChange);\n  const slides = React.useMemo(\n    () => React.Children.toArray(children).filter((item) => Boolean(item)),\n    [children],\n  );\n  const childCount = slides.length;\n\n  const handleChange: GalleryProps['onChange'] = React.useCallback(\n    (current: number) => {\n      if (current === slideIndex) {\n        return;\n      }\n      !isControlled && setSlideIndex(current);\n      onChange && onChange(current);\n    },\n    [isControlled, onChange, slideIndex],\n  );\n\n  const autoplay = useTimeout(() => handleChange((slideIndex + 1) % childCount), timeout);\n  React.useEffect(\n    () => (timeout ? autoplay.set() : autoplay.clear()),\n    [timeout, slideIndex, autoplay],\n  );\n\n  // prevent invalid slideIndex\n  // any slide index is invalid with no slides, just keep it as is\n  const safeSlideIndex = childCount > 0 ? clamp(slideIndex, 0, childCount - 1) : slideIndex;\n  // notify parent in controlled mode\n  React.useEffect(() => {\n    if (onChange && safeSlideIndex !== slideIndex) {\n      onChange(safeSlideIndex);\n    }\n    setSlideIndex(safeSlideIndex);\n  }, [onChange, safeSlideIndex, slideIndex]);\n\n  return (\n    <BaseGallery\n      isDraggable={isDraggable}\n      {...props}\n      bullets={childCount > 0 && bullets}\n      slideIndex={safeSlideIndex}\n      onChange={handleChange}\n    >\n      {slides}\n    </BaseGallery>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}