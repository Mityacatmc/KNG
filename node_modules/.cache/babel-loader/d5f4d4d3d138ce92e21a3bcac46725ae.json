{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames, hasReactNode } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries\";\nimport { useId } from \"../../hooks/useId\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { Platform } from \"../../lib/platform\";\nimport { stopPropagation } from \"../../lib/utils\";\nimport { useScrollLock } from \"../AppRoot/ScrollContext\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton\";\nimport { PopoutWrapper } from \"../PopoutWrapper/PopoutWrapper\";\nimport { AlertActions } from \"./AlertActions\";\nimport { AlertHeader, AlertText } from \"./AlertTypography\";\n/**\n * @see https://vkcom.github.io/VKUI/#/Alert\n */\n\nexport var Alert = function Alert(_param) {\n  var _param_actions = _param.actions,\n      actions = _param_actions === void 0 ? [] : _param_actions,\n      _param_actionsLayout = _param.actionsLayout,\n      actionsLayout = _param_actionsLayout === void 0 ? \"horizontal\" : _param_actionsLayout,\n      children = _param.children,\n      className = _param.className,\n      style = _param.style,\n      text = _param.text,\n      header = _param.header,\n      onClose = _param.onClose,\n      _param_dismissLabel = _param.dismissLabel,\n      dismissLabel = _param_dismissLabel === void 0 ? \"Закрыть предупреждение\" : _param_dismissLabel,\n      renderAction = _param.renderAction,\n      actionsAlign = _param.actionsAlign,\n      restProps = _object_without_properties(_param, [\"actions\", \"actionsLayout\", \"children\", \"className\", \"style\", \"text\", \"header\", \"onClose\", \"dismissLabel\", \"renderAction\", \"actionsAlign\"]);\n\n  var generatedId = useId();\n  var headerId = \"vkui-alert-\".concat(generatedId, \"-header\");\n  var textId = \"vkui-alert-\".concat(generatedId, \"-text\");\n  var platform = usePlatform();\n  var isDesktop = useAdaptivityWithJSMediaQueries().isDesktop;\n  var waitTransitionFinish = useWaitTransitionFinish().waitTransitionFinish;\n\n  var _React_useState = _sliced_to_array(React.useState(false), 2),\n      closing = _React_useState[0],\n      setClosing = _React_useState[1];\n\n  var elementRef = React.useRef(null);\n  var timeout = platform === Platform.IOS ? 300 : 200;\n  var close = React.useCallback(function () {\n    setClosing(true);\n    waitTransitionFinish(elementRef.current, function (e) {\n      if (!e || e.propertyName === \"opacity\") {\n        onClose();\n      }\n    }, timeout);\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n  var onItemClick = React.useCallback(function (item) {\n    var action = item.action,\n        autoClose = item.autoClose;\n\n    if (autoClose) {\n      setClosing(true);\n      waitTransitionFinish(elementRef.current, function (e) {\n        if (!e || e.propertyName === \"opacity\") {\n          onClose();\n          action && action();\n        }\n      }, timeout);\n    } else {\n      action && action();\n    }\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n  useScrollLock();\n  return /*#__PURE__*/React.createElement(PopoutWrapper, {\n    className: className,\n    closing: closing,\n    style: style,\n    onClick: close\n  }, /*#__PURE__*/React.createElement(FocusTrap, _object_spread_props(_object_spread({}, restProps), {\n    getRootRef: elementRef,\n    onClick: stopPropagation,\n    onClose: close,\n    timeout: timeout,\n    className: classNames(\"vkuiAlert\", platform === Platform.IOS && \"vkuiAlert--ios\", platform === Platform.VKCOM && \"vkuiAlert--vkcom\", closing && \"vkuiAlert--closing\", isDesktop && \"vkuiAlert--desktop\"),\n    role: \"alertdialog\",\n    \"aria-modal\": true,\n    \"aria-labelledby\": headerId,\n    \"aria-describedby\": textId\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiAlert__content\"\n  }, hasReactNode(header) && /*#__PURE__*/React.createElement(AlertHeader, {\n    id: headerId\n  }, header), hasReactNode(text) && /*#__PURE__*/React.createElement(AlertText, {\n    id: textId\n  }, text), children), /*#__PURE__*/React.createElement(AlertActions, {\n    actions: actions,\n    actionsAlign: actionsAlign,\n    actionsLayout: actionsLayout,\n    renderAction: renderAction,\n    onItemClick: onItemClick\n  }), isDesktop && /*#__PURE__*/React.createElement(ModalDismissButton, {\n    onClick: close,\n    \"aria-label\": dismissLabel\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","classNames","hasReactNode","useAdaptivityWithJSMediaQueries","useId","usePlatform","useWaitTransitionFinish","Platform","stopPropagation","useScrollLock","FocusTrap","ModalDismissButton","PopoutWrapper","AlertActions","AlertHeader","AlertText","Alert","actions","_param_actions","_param_actionsLayout","actionsLayout","children","className","style","text","header","onClose","dismissLabel","_param_dismissLabel","renderAction","actionsAlign","restProps","generatedId","headerId","concat","textId","platform","isDesktop","waitTransitionFinish","useState","closing","setClosing","elementRef","useRef","timeout","IOS","close","useCallback","current","e","propertyName","onItemClick","item","action","autoClose","onClick","getRootRef","VKCOM","role","aria-modal","aria-labelledby","aria-describedby","div","id","aria-label"],"sources":["C:\\Users\\Я\\Desktop\\myproject\\vk-miniapps\\Koto-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Alert\\Alert.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useId } from '../../hooks/useId';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { Platform } from '../../lib/platform';\nimport { stopPropagation } from '../../lib/utils';\nimport { AlignType, AnchorHTMLAttributesOnly } from '../../types';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { ButtonProps } from '../Button/Button';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { AlertActionProps } from './AlertAction';\nimport { AlertActions } from './AlertActions';\nimport { AlertHeader, AlertText } from './AlertTypography';\nimport styles from './Alert.module.css';\n\ntype AlertActionMode = 'cancel' | 'destructive' | 'default';\n\nexport interface AlertActionInterface\n  extends Pick<ButtonProps, 'Component'>,\n    AnchorHTMLAttributesOnly {\n  title: string;\n  action?: VoidFunction;\n  autoClose?: boolean;\n  mode: AlertActionMode;\n}\n\nexport interface AlertProps extends React.HTMLAttributes<HTMLElement> {\n  actionsLayout?: 'vertical' | 'horizontal';\n  actionsAlign?: AlignType;\n  actions?: AlertActionInterface[];\n  renderAction?: (props: AlertActionProps) => React.ReactNode;\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  onClose: VoidFunction;\n\n  /**\n   * `aria-label` для кнопки закрытия. Необходим, чтобы кнопка была доступной.\n   */\n  dismissLabel?: string;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Alert\n */\nexport const Alert = ({\n  actions = [],\n  actionsLayout = 'horizontal',\n  children,\n  className,\n  style,\n  text,\n  header,\n  onClose,\n  dismissLabel = 'Закрыть предупреждение',\n  renderAction,\n  actionsAlign,\n  ...restProps\n}: AlertProps) => {\n  const generatedId = useId();\n\n  const headerId = `vkui-alert-${generatedId}-header`;\n  const textId = `vkui-alert-${generatedId}-text`;\n\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n\n  const [closing, setClosing] = React.useState(false);\n\n  const elementRef = React.useRef<HTMLDivElement>(null);\n\n  const timeout = platform === Platform.IOS ? 300 : 200;\n\n  const close = React.useCallback(() => {\n    setClosing(true);\n    waitTransitionFinish(\n      elementRef.current,\n      (e?: TransitionEvent) => {\n        if (!e || e.propertyName === 'opacity') {\n          onClose();\n        }\n      },\n      timeout,\n    );\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n\n  const onItemClick = React.useCallback(\n    (item: AlertActionInterface) => {\n      const { action, autoClose } = item;\n\n      if (autoClose) {\n        setClosing(true);\n        waitTransitionFinish(\n          elementRef.current,\n          (e?: TransitionEvent) => {\n            if (!e || e.propertyName === 'opacity') {\n              onClose();\n              action && action();\n            }\n          },\n          timeout,\n        );\n      } else {\n        action && action();\n      }\n    },\n    [elementRef, waitTransitionFinish, onClose, timeout],\n  );\n\n  useScrollLock();\n\n  return (\n    <PopoutWrapper className={className} closing={closing} style={style} onClick={close}>\n      <FocusTrap\n        {...restProps}\n        getRootRef={elementRef}\n        onClick={stopPropagation}\n        onClose={close}\n        timeout={timeout}\n        className={classNames(\n          styles['Alert'],\n          platform === Platform.IOS && styles['Alert--ios'],\n          platform === Platform.VKCOM && styles['Alert--vkcom'],\n          closing && styles['Alert--closing'],\n          isDesktop && styles['Alert--desktop'],\n        )}\n        role=\"alertdialog\"\n        aria-modal\n        aria-labelledby={headerId}\n        aria-describedby={textId}\n      >\n        <div className={styles['Alert__content']}>\n          {hasReactNode(header) && <AlertHeader id={headerId}>{header}</AlertHeader>}\n          {hasReactNode(text) && <AlertText id={textId}>{text}</AlertText>}\n          {children}\n        </div>\n        <AlertActions\n          actions={actions}\n          actionsAlign={actionsAlign}\n          actionsLayout={actionsLayout}\n          renderAction={renderAction}\n          onItemClick={onItemClick}\n        />\n        {isDesktop && <ModalDismissButton onClick={close} aria-label={dismissLabel} />}\n      </FocusTrap>\n    </PopoutWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}