{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries\";\nimport { useObjectMemo } from \"../../hooks/useObjectMemo\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { Platform } from \"../../lib/platform\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { useScrollLock } from \"../AppRoot/ScrollContext\";\nimport { PopoutWrapper } from \"../PopoutWrapper/PopoutWrapper\";\nimport { Footnote } from \"../Typography/Footnote/Footnote\";\nimport { ActionSheetContext } from \"./ActionSheetContext\";\nimport { ActionSheetDefaultIosCloseItem } from \"./ActionSheetDefaultIosCloseItem\";\nimport { ActionSheetDropdown } from \"./ActionSheetDropdown\";\nimport { ActionSheetDropdownDesktop } from \"./ActionSheetDropdownDesktop\";\nvar warn = warnOnce(\"ActionSheet\");\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\n\nexport var ActionSheet = function ActionSheet(_param) {\n  var children = _param.children,\n      className = _param.className,\n      header = _param.header,\n      text = _param.text,\n      style = _param.style,\n      iosCloseItem = _param.iosCloseItem,\n      popupDirection = _param.popupDirection,\n      popupOffsetDistance = _param.popupOffsetDistance,\n      placement = _param.placement,\n      restProps = _object_without_properties(_param, [\"children\", \"className\", \"header\", \"text\", \"style\", \"iosCloseItem\", \"popupDirection\", \"popupOffsetDistance\", \"placement\"]);\n\n  var platform = usePlatform();\n\n  var _React_useState = _sliced_to_array(React.useState(undefined), 2),\n      closingBy = _React_useState[0],\n      setClosingBy = _React_useState[1];\n\n  var onClose = function onClose() {\n    return setClosingBy(\"other\");\n  };\n\n  var _action = React.useRef(noop);\n\n  var afterClose = function afterClose() {\n    restProps.onClose({\n      closedBy: closingBy || \"other\"\n    });\n\n    _action.current();\n\n    _action.current = noop;\n  };\n\n  var isDesktop = useAdaptivityWithJSMediaQueries().isDesktop;\n  useScrollLock(!isDesktop);\n  var timeout = platform === Platform.IOS ? 300 : 200;\n\n  if (isDesktop) {\n    timeout = 0;\n  }\n\n  var fallbackTransitionFinish = useTimeout(afterClose, timeout);\n  React.useEffect(function () {\n    if (closingBy) {\n      fallbackTransitionFinish.set();\n    } else {\n      fallbackTransitionFinish.clear();\n    }\n  }, [closingBy, fallbackTransitionFinish]);\n  var onItemClick = React.useCallback(function (param) {\n    var action = param.action,\n        immediateAction = param.immediateAction,\n        autoClose = param.autoClose,\n        isCancelItem = param.isCancelItem;\n    return function (event) {\n      event.persist();\n      immediateAction && immediateAction(event);\n\n      if (autoClose) {\n        _action.current = function () {\n          return action && action(event);\n        };\n\n        setClosingBy(isCancelItem ? \"cancel-item\" : \"action-item\");\n      } else {\n        action && action(event);\n      }\n    };\n  }, []);\n  var contextValue = useObjectMemo({\n    onItemClick: onItemClick,\n    isDesktop: isDesktop\n  });\n  var DropdownComponent = isDesktop ? ActionSheetDropdownDesktop : ActionSheetDropdown;\n\n  if (process.env.NODE_ENV === \"development\" && popupDirection) {\n    // TODO [>=6]: popupDirection\n    warn('Свойство \"popupDirection\" будет удалено в v6. Используйте свойство \"placement\"');\n  }\n\n  popupDirection = popupDirection !== undefined ? popupDirection : \"bottom\";\n  var dropdownProps = isDesktop ? Object.assign(restProps, {\n    popupOffsetDistance: popupOffsetDistance,\n    popupDirection: popupDirection,\n    placement: placement\n  }) : restProps;\n  var actionSheet = /*#__PURE__*/React.createElement(ActionSheetContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(DropdownComponent, _object_spread_props(_object_spread({\n    closing: Boolean(closingBy),\n    timeout: timeout\n  }, dropdownProps), {\n    onClose: onClose,\n    className: isDesktop ? className : undefined,\n    style: isDesktop ? style : undefined\n  }), (header || text) && /*#__PURE__*/React.createElement(\"header\", {\n    className: \"vkuiActionSheet__header\"\n  }, header && /*#__PURE__*/React.createElement(Footnote, {\n    weight: \"2\",\n    className: \"vkuiActionSheet__title\"\n  }, header), text && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiActionSheet__text\"\n  }, text)), children, platform === Platform.IOS && !isDesktop && (iosCloseItem !== null && iosCloseItem !== void 0 ? iosCloseItem : /*#__PURE__*/React.createElement(ActionSheetDefaultIosCloseItem, null))));\n\n  if (isDesktop) {\n    return actionSheet;\n  }\n\n  return /*#__PURE__*/React.createElement(PopoutWrapper, {\n    closing: Boolean(closingBy),\n    alignY: \"bottom\",\n    className: className,\n    style: style,\n    onClick: onClose,\n    hasMask: true,\n    fixed: true\n  }, actionSheet);\n};","map":{"version":3,"mappings":"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","names":["React","noop","useAdaptivityWithJSMediaQueries","useObjectMemo","usePlatform","useTimeout","Platform","warnOnce","useScrollLock","PopoutWrapper","Footnote","ActionSheetContext","ActionSheetDefaultIosCloseItem","ActionSheetDropdown","ActionSheetDropdownDesktop","warn","ActionSheet","children","className","header","text","style","iosCloseItem","popupDirection","popupOffsetDistance","placement","restProps","platform","useState","undefined","closingBy","setClosingBy","onClose","_action","useRef","afterClose","closedBy","current","isDesktop","timeout","IOS","fallbackTransitionFinish","useEffect","set","clear","onItemClick","useCallback","action","immediateAction","autoClose","isCancelItem","event","persist","contextValue","DropdownComponent","process","env","NODE_ENV","dropdownProps","Object","assign","actionSheet","Provider","value","closing","Boolean","weight","alignY","onClick","hasMask","fixed"],"sources":["C:\\Users\\Я\\Desktop\\myproject\\vk-miniapps\\Koto-app\\node_modules\\@vkontakte\\vkui\\src\\components\\ActionSheet\\ActionSheet.tsx"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { Platform } from '../../lib/platform';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { ActionSheetContext, ItemClickHandler } from './ActionSheetContext';\nimport { ActionSheetDefaultIosCloseItem } from './ActionSheetDefaultIosCloseItem';\nimport { ActionSheetDropdown } from './ActionSheetDropdown';\nimport { ActionSheetDropdownDesktop } from './ActionSheetDropdownDesktop';\nimport { SharedDropdownProps } from './types';\nimport styles from './ActionSheet.module.css';\n\nconst warn = warnOnce('ActionSheet');\ntype CloseInitiators = 'action-item' | 'cancel-item' | 'other';\nexport interface ActionSheetOnCloseOptions {\n  closedBy: CloseInitiators;\n}\n\nexport interface ActionSheetProps\n  extends Pick<\n      SharedDropdownProps,\n      'toggleRef' | 'popupDirection' | 'popupOffsetDistance' | 'placement'\n    >,\n    React.HTMLAttributes<HTMLDivElement> {\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  /**\n   * Закрыть попап по клику снаружи.\n   */\n  onClose(options: ActionSheetOnCloseOptions): void;\n  /**\n   * Только мобильный iOS.\n   */\n  iosCloseItem?: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\nexport const ActionSheet = ({\n  children,\n  className,\n  header,\n  text,\n  style,\n  iosCloseItem,\n  popupDirection,\n  popupOffsetDistance,\n  placement,\n  ...restProps\n}: ActionSheetProps) => {\n  const platform = usePlatform();\n  const [closingBy, setClosingBy] = React.useState<undefined | CloseInitiators>(undefined);\n  const onClose = () => setClosingBy('other');\n  const _action = React.useRef(noop);\n\n  const afterClose = () => {\n    restProps.onClose({ closedBy: closingBy || 'other' });\n    _action.current();\n    _action.current = noop;\n  };\n\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n\n  useScrollLock(!isDesktop);\n\n  let timeout = platform === Platform.IOS ? 300 : 200;\n\n  if (isDesktop) {\n    timeout = 0;\n  }\n\n  const fallbackTransitionFinish = useTimeout(afterClose, timeout);\n  React.useEffect(() => {\n    if (closingBy) {\n      fallbackTransitionFinish.set();\n    } else {\n      fallbackTransitionFinish.clear();\n    }\n  }, [closingBy, fallbackTransitionFinish]);\n\n  const onItemClick = React.useCallback<ItemClickHandler>(\n    ({ action, immediateAction, autoClose, isCancelItem }) =>\n      (event) => {\n        event.persist();\n        immediateAction && immediateAction(event);\n        if (autoClose) {\n          _action.current = () => action && action(event);\n          setClosingBy(isCancelItem ? 'cancel-item' : 'action-item');\n        } else {\n          action && action(event);\n        }\n      },\n    [],\n  );\n  const contextValue = useObjectMemo({ onItemClick, isDesktop });\n\n  const DropdownComponent = isDesktop ? ActionSheetDropdownDesktop : ActionSheetDropdown;\n\n  if (process.env.NODE_ENV === 'development' && popupDirection) {\n    // TODO [>=6]: popupDirection\n    warn('Свойство \"popupDirection\" будет удалено в v6. Используйте свойство \"placement\"');\n  }\n\n  popupDirection = popupDirection !== undefined ? popupDirection : 'bottom';\n\n  const dropdownProps = isDesktop\n    ? Object.assign(restProps, { popupOffsetDistance, popupDirection, placement })\n    : restProps;\n\n  const actionSheet = (\n    <ActionSheetContext.Provider value={contextValue}>\n      <DropdownComponent\n        closing={Boolean(closingBy)}\n        timeout={timeout}\n        {...dropdownProps}\n        onClose={onClose}\n        className={isDesktop ? className : undefined}\n        style={isDesktop ? style : undefined}\n      >\n        {(header || text) && (\n          <header className={styles['ActionSheet__header']}>\n            {header && (\n              <Footnote weight=\"2\" className={styles['ActionSheet__title']}>\n                {header}\n              </Footnote>\n            )}\n            {text && <Footnote className={styles['ActionSheet__text']}>{text}</Footnote>}\n          </header>\n        )}\n        {children}\n        {platform === Platform.IOS &&\n          !isDesktop &&\n          (iosCloseItem ?? <ActionSheetDefaultIosCloseItem />)}\n      </DropdownComponent>\n    </ActionSheetContext.Provider>\n  );\n\n  if (isDesktop) {\n    return actionSheet;\n  }\n\n  return (\n    <PopoutWrapper\n      closing={Boolean(closingBy)}\n      alignY=\"bottom\"\n      className={className}\n      style={style}\n      onClick={onClose}\n      hasMask\n      fixed\n    >\n      {actionSheet}\n    </PopoutWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}