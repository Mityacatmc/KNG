{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { useCalendar } from \"../../hooks/useCalendar\";\nimport { isFirstDay, isLastDay, navigateDate, setTimeEqual } from \"../../lib/calendar\";\nimport { addMonths, endOfDay, isAfter, isBefore, isSameDay, isSameMonth, isWithinInterval, startOfDay } from \"../../lib/date\";\nimport { CalendarDays } from \"../CalendarDays/CalendarDays\";\nimport { CalendarHeader } from \"../CalendarHeader/CalendarHeader\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\n\nvar getIsDaySelected = function getIsDaySelected(day, value) {\n  var _value;\n\n  if (!((_value = value) === null || _value === void 0 ? void 0 : _value[0]) || !value[1]) {\n    return false;\n  }\n\n  return Boolean(isWithinInterval(day, startOfDay(value[0]), endOfDay(value[1])));\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/CalendarRange\n */\n\n\nexport var CalendarRange = function CalendarRange(_param) {\n  var value = _param.value,\n      onChange = _param.onChange,\n      disablePast = _param.disablePast,\n      disableFuture = _param.disableFuture,\n      shouldDisableDate = _param.shouldDisableDate,\n      onClose = _param.onClose,\n      _param_weekStartsOn = _param.weekStartsOn,\n      weekStartsOn = _param_weekStartsOn === void 0 ? 1 : _param_weekStartsOn,\n      getRootRef = _param.getRootRef,\n      disablePickers = _param.disablePickers,\n      prevMonthAriaLabel = _param.prevMonthAriaLabel,\n      nextMonthAriaLabel = _param.nextMonthAriaLabel,\n      changeMonthAriaLabel = _param.changeMonthAriaLabel,\n      changeYearAriaLabel = _param.changeYearAriaLabel,\n      _param_changeDayAriaLabel = _param.changeDayAriaLabel,\n      changeDayAriaLabel = _param_changeDayAriaLabel === void 0 ? \"Изменить день\" : _param_changeDayAriaLabel,\n      prevMonthIcon = _param.prevMonthIcon,\n      nextMonthIcon = _param.nextMonthIcon,\n      listenDayChangesForUpdate = _param.listenDayChangesForUpdate,\n      props = _object_without_properties(_param, [\"value\", \"onChange\", \"disablePast\", \"disableFuture\", \"shouldDisableDate\", \"onClose\", \"weekStartsOn\", \"getRootRef\", \"disablePickers\", \"prevMonthAriaLabel\", \"nextMonthAriaLabel\", \"changeMonthAriaLabel\", \"changeYearAriaLabel\", \"changeDayAriaLabel\", \"prevMonthIcon\", \"nextMonthIcon\", \"listenDayChangesForUpdate\"]);\n\n  var _useCalendar = useCalendar({\n    value: value,\n    disableFuture: disableFuture,\n    disablePast: disablePast,\n    shouldDisableDate: shouldDisableDate\n  }),\n      viewDate = _useCalendar.viewDate,\n      setViewDate = _useCalendar.setViewDate,\n      setPrevMonth = _useCalendar.setPrevMonth,\n      setNextMonth = _useCalendar.setNextMonth,\n      focusedDay = _useCalendar.focusedDay,\n      setFocusedDay = _useCalendar.setFocusedDay,\n      isDayFocused = _useCalendar.isDayFocused,\n      isDayDisabled = _useCalendar.isDayDisabled,\n      resetSelectedDay = _useCalendar.resetSelectedDay;\n\n  var _React_useState = _sliced_to_array(React.useState(), 2),\n      hintedDate = _React_useState[0],\n      setHintedDate = _React_useState[1];\n\n  var secondViewDate = addMonths(viewDate, 1);\n  var handleKeyDown = React.useCallback(function (event) {\n    var _value;\n\n    if ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(event.key)) {\n      event.preventDefault();\n    }\n\n    var newFocusedDay = navigateDate(focusedDay !== null && focusedDay !== void 0 ? focusedDay : (_value = value) === null || _value === void 0 ? void 0 : _value[1], event.key);\n\n    if (newFocusedDay && !isSameMonth(newFocusedDay, viewDate) && !isSameMonth(newFocusedDay, addMonths(viewDate, 1))) {\n      setViewDate(newFocusedDay);\n    }\n\n    setFocusedDay(newFocusedDay);\n  }, [focusedDay, setFocusedDay, setViewDate, value, viewDate]);\n  var getNewValue = React.useCallback(function (date) {\n    if (!value) {\n      return [date, null];\n    }\n\n    var start = value[0];\n    var end = value[1];\n\n    if (start && isSameDay(date, start) || end && isSameDay(date, end)) {\n      return [setTimeEqual(date, start), setTimeEqual(date, end)];\n    } else if (start && isBefore(date, start)) {\n      return [setTimeEqual(date, start), end];\n    } else if (start && isAfter(date, start)) {\n      return [start, setTimeEqual(date, end)];\n    }\n\n    return value;\n  }, [value]);\n  var onDayChange = React.useCallback(function (date) {\n    var _onChange;\n\n    (_onChange = onChange) === null || _onChange === void 0 ? void 0 : _onChange(getNewValue(date));\n    setHintedDate(undefined);\n  }, [onChange, getNewValue]);\n  var isDaySelected = React.useCallback(function (day) {\n    return getIsDaySelected(day, value);\n  }, [value]);\n  var isDayActive = React.useCallback(function (day) {\n    var _value, _value1;\n\n    return Boolean(((_value = value) === null || _value === void 0 ? void 0 : _value[0]) && isSameDay(day, value[0]) || ((_value1 = value) === null || _value1 === void 0 ? void 0 : _value1[1]) && isSameDay(day, value[1]));\n  }, [value]);\n  var isDaySelectionEnd = React.useCallback(function (day, dayOfWeek) {\n    var _value;\n\n    return Boolean(isLastDay(day, dayOfWeek) || ((_value = value) === null || _value === void 0 ? void 0 : _value[1]) && isSameDay(day, value[1]));\n  }, [value]);\n  var isHintedDaySelectionEnd = React.useCallback(function (day, dayOfWeek) {\n    var _hintedDate;\n\n    return Boolean(isLastDay(day, dayOfWeek) || ((_hintedDate = hintedDate) === null || _hintedDate === void 0 ? void 0 : _hintedDate[1]) && isSameDay(day, hintedDate[1]));\n  }, [hintedDate]);\n  var isDaySelectionStart = React.useCallback(function (day, dayOfWeek) {\n    var _value;\n\n    return Boolean(isFirstDay(day, dayOfWeek) || ((_value = value) === null || _value === void 0 ? void 0 : _value[0]) && isSameDay(day, value[0]));\n  }, [value]);\n  var isHintedDaySelectionStart = React.useCallback(function (day, dayOfWeek) {\n    var _hintedDate;\n\n    return Boolean(isFirstDay(day, dayOfWeek) || ((_hintedDate = hintedDate) === null || _hintedDate === void 0 ? void 0 : _hintedDate[0]) && isSameDay(day, hintedDate[0]));\n  }, [hintedDate]);\n  var onDayEnter = React.useCallback(function (date) {\n    return setHintedDate(getNewValue(date));\n  }, [setHintedDate, getNewValue]);\n  var onDayLeave = React.useCallback(function () {\n    return setHintedDate(undefined);\n  }, [setHintedDate]);\n  var isDayHinted = React.useCallback(function (day) {\n    return getIsDaySelected(day, hintedDate);\n  }, [hintedDate]);\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, props), {\n    baseClassName: \"vkuiCalendarRange\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCalendarRange__inner\"\n  }, /*#__PURE__*/React.createElement(CalendarHeader, {\n    viewDate: viewDate,\n    onChange: setViewDate,\n    nextMonth: false,\n    onPrevMonth: setPrevMonth,\n    disablePickers: disablePickers,\n    className: \"vkuiCalendarRange__header\",\n    prevMonthAriaLabel: prevMonthAriaLabel,\n    nextMonthAriaLabel: nextMonthAriaLabel,\n    changeMonthAriaLabel: changeMonthAriaLabel,\n    changeYearAriaLabel: changeYearAriaLabel,\n    prevMonthIcon: prevMonthIcon\n  }), /*#__PURE__*/React.createElement(CalendarDays, {\n    viewDate: viewDate,\n    value: value,\n    weekStartsOn: weekStartsOn,\n    onKeyDown: handleKeyDown,\n    isDayFocused: isDayFocused,\n    onDayChange: onDayChange,\n    isDaySelected: isDaySelected,\n    isDayActive: isDayActive,\n    isDaySelectionEnd: isDaySelectionEnd,\n    isDaySelectionStart: isDaySelectionStart,\n    isDayHinted: isDayHinted,\n    onDayEnter: onDayEnter,\n    onDayLeave: onDayLeave,\n    isHintedDaySelectionEnd: isHintedDaySelectionEnd,\n    isHintedDaySelectionStart: isHintedDaySelectionStart,\n    isDayDisabled: isDayDisabled,\n    listenDayChangesForUpdate: listenDayChangesForUpdate,\n    \"aria-label\": changeDayAriaLabel\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCalendarRange__inner\"\n  }, /*#__PURE__*/React.createElement(CalendarHeader, {\n    viewDate: secondViewDate,\n    onChange: setViewDate,\n    prevMonth: false,\n    onNextMonth: setNextMonth,\n    disablePickers: disablePickers,\n    className: \"vkuiCalendarRange__header\",\n    prevMonthAriaLabel: prevMonthAriaLabel,\n    nextMonthAriaLabel: nextMonthAriaLabel,\n    changeMonthAriaLabel: changeMonthAriaLabel,\n    changeYearAriaLabel: changeYearAriaLabel,\n    nextMonthIcon: nextMonthIcon\n  }), /*#__PURE__*/React.createElement(CalendarDays, {\n    viewDate: secondViewDate,\n    value: value,\n    weekStartsOn: weekStartsOn,\n    \"aria-label\": changeDayAriaLabel,\n    onKeyDown: handleKeyDown,\n    isDayFocused: isDayFocused,\n    onDayChange: onDayChange,\n    isDaySelected: isDaySelected,\n    isDayActive: isDayActive,\n    isDaySelectionEnd: isDaySelectionEnd,\n    isDaySelectionStart: isDaySelectionStart,\n    isDayHinted: isDayHinted,\n    onDayEnter: onDayEnter,\n    onDayLeave: onDayLeave,\n    isHintedDaySelectionEnd: isHintedDaySelectionEnd,\n    isHintedDaySelectionStart: isHintedDaySelectionStart,\n    isDayDisabled: isDayDisabled,\n    listenDayChangesForUpdate: listenDayChangesForUpdate,\n    tabIndex: 0,\n    onBlur: resetSelectedDay\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","useCalendar","isFirstDay","isLastDay","navigateDate","setTimeEqual","addMonths","endOfDay","isAfter","isBefore","isSameDay","isSameMonth","isWithinInterval","startOfDay","CalendarDays","CalendarHeader","RootComponent","getIsDaySelected","day","value","Boolean","CalendarRange","onChange","disablePast","disableFuture","shouldDisableDate","onClose","weekStartsOn","_param_weekStartsOn","getRootRef","disablePickers","prevMonthAriaLabel","nextMonthAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","changeDayAriaLabel","_param_changeDayAriaLabel","prevMonthIcon","nextMonthIcon","listenDayChangesForUpdate","props","viewDate","setViewDate","setPrevMonth","setNextMonth","focusedDay","setFocusedDay","isDayFocused","isDayDisabled","resetSelectedDay","useState","hintedDate","setHintedDate","secondViewDate","handleKeyDown","useCallback","event","includes","key","preventDefault","newFocusedDay","getNewValue","date","start","end","onDayChange","undefined","isDaySelected","isDayActive","isDaySelectionEnd","dayOfWeek","isHintedDaySelectionEnd","isDaySelectionStart","isHintedDaySelectionStart","onDayEnter","onDayLeave","isDayHinted","baseClassName","div","className","nextMonth","onPrevMonth","onKeyDown","aria-label","prevMonth","onNextMonth","tabIndex","onBlur"],"sources":["C:\\Users\\Я\\Desktop\\myproject\\vk-miniapps\\Koto-app\\node_modules\\@vkontakte\\vkui\\src\\components\\CalendarRange\\CalendarRange.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useCalendar } from '../../hooks/useCalendar';\nimport { isFirstDay, isLastDay, navigateDate, setTimeEqual } from '../../lib/calendar';\nimport {\n  addMonths,\n  endOfDay,\n  isAfter,\n  isBefore,\n  isSameDay,\n  isSameMonth,\n  isWithinInterval,\n  startOfDay,\n} from '../../lib/date';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { CalendarDays, CalendarDaysProps } from '../CalendarDays/CalendarDays';\nimport { CalendarHeader, CalendarHeaderProps } from '../CalendarHeader/CalendarHeader';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './CalendarRange.module.css';\n\nexport interface CalendarRangeProps\n  extends Omit<HTMLAttributesWithRootRef<HTMLDivElement>, 'onChange'>,\n    Pick<\n      CalendarHeaderProps,\n      | 'prevMonthAriaLabel'\n      | 'nextMonthAriaLabel'\n      | 'changeMonthAriaLabel'\n      | 'changeYearAriaLabel'\n      | 'prevMonthIcon'\n      | 'nextMonthIcon'\n    >,\n    Pick<CalendarDaysProps, 'listenDayChangesForUpdate'> {\n  value?: Array<Date | null>;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  disablePickers?: boolean;\n  changeDayAriaLabel?: string;\n  weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n  onChange?(value?: Array<Date | null>): void;\n  shouldDisableDate?(value: Date): boolean;\n  onClose?(): void;\n}\n\nconst getIsDaySelected = (day: Date, value?: Array<Date | null>) => {\n  if (!value?.[0] || !value[1]) {\n    return false;\n  }\n\n  return Boolean(isWithinInterval(day, startOfDay(value[0]), endOfDay(value[1])));\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/CalendarRange\n */\nexport const CalendarRange = ({\n  value,\n  onChange,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onClose,\n  weekStartsOn = 1,\n  getRootRef,\n  disablePickers,\n  prevMonthAriaLabel,\n  nextMonthAriaLabel,\n  changeMonthAriaLabel,\n  changeYearAriaLabel,\n  changeDayAriaLabel = 'Изменить день',\n  prevMonthIcon,\n  nextMonthIcon,\n  listenDayChangesForUpdate,\n  ...props\n}: CalendarRangeProps) => {\n  const {\n    viewDate,\n    setViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  } = useCalendar({ value, disableFuture, disablePast, shouldDisableDate });\n  const [hintedDate, setHintedDate] = React.useState<Array<Date | null>>();\n  const secondViewDate = addMonths(viewDate, 1);\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) {\n        event.preventDefault();\n      }\n\n      const newFocusedDay = navigateDate(focusedDay ?? value?.[1], event.key);\n\n      if (\n        newFocusedDay &&\n        !isSameMonth(newFocusedDay, viewDate) &&\n        !isSameMonth(newFocusedDay, addMonths(viewDate, 1))\n      ) {\n        setViewDate(newFocusedDay);\n      }\n      setFocusedDay(newFocusedDay);\n    },\n    [focusedDay, setFocusedDay, setViewDate, value, viewDate],\n  );\n\n  const getNewValue = React.useCallback(\n    (date: Date) => {\n      if (!value) {\n        return [date, null];\n      }\n\n      const start = value[0];\n      const end = value[1];\n      if ((start && isSameDay(date, start)) || (end && isSameDay(date, end))) {\n        return [setTimeEqual(date, start), setTimeEqual(date, end)];\n      } else if (start && isBefore(date, start)) {\n        return [setTimeEqual(date, start), end];\n      } else if (start && isAfter(date, start)) {\n        return [start, setTimeEqual(date, end)];\n      }\n\n      return value;\n    },\n    [value],\n  );\n\n  const onDayChange = React.useCallback(\n    (date: Date) => {\n      onChange?.(getNewValue(date));\n      setHintedDate(undefined);\n    },\n    [onChange, getNewValue],\n  );\n\n  const isDaySelected = React.useCallback((day: Date) => getIsDaySelected(day, value), [value]);\n\n  const isDayActive = React.useCallback(\n    (day: Date) =>\n      Boolean((value?.[0] && isSameDay(day, value[0])) || (value?.[1] && isSameDay(day, value[1]))),\n    [value],\n  );\n\n  const isDaySelectionEnd = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(isLastDay(day, dayOfWeek) || (value?.[1] && isSameDay(day, value[1]))),\n    [value],\n  );\n\n  const isHintedDaySelectionEnd = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(isLastDay(day, dayOfWeek) || (hintedDate?.[1] && isSameDay(day, hintedDate[1]))),\n    [hintedDate],\n  );\n\n  const isDaySelectionStart = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(isFirstDay(day, dayOfWeek) || (value?.[0] && isSameDay(day, value[0]))),\n    [value],\n  );\n\n  const isHintedDaySelectionStart = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(isFirstDay(day, dayOfWeek) || (hintedDate?.[0] && isSameDay(day, hintedDate[0]))),\n    [hintedDate],\n  );\n\n  const onDayEnter = React.useCallback(\n    (date: Date) => setHintedDate(getNewValue(date)),\n    [setHintedDate, getNewValue],\n  );\n\n  const onDayLeave = React.useCallback(() => setHintedDate(undefined), [setHintedDate]);\n\n  const isDayHinted = React.useCallback(\n    (day: Date) => getIsDaySelected(day, hintedDate),\n    [hintedDate],\n  );\n\n  return (\n    <RootComponent {...props} baseClassName={styles['CalendarRange']}>\n      <div className={styles['CalendarRange__inner']}>\n        <CalendarHeader\n          viewDate={viewDate}\n          onChange={setViewDate}\n          nextMonth={false}\n          onPrevMonth={setPrevMonth}\n          disablePickers={disablePickers}\n          className={styles['CalendarRange__header']}\n          prevMonthAriaLabel={prevMonthAriaLabel}\n          nextMonthAriaLabel={nextMonthAriaLabel}\n          changeMonthAriaLabel={changeMonthAriaLabel}\n          changeYearAriaLabel={changeYearAriaLabel}\n          prevMonthIcon={prevMonthIcon}\n        />\n        <CalendarDays\n          viewDate={viewDate}\n          value={value}\n          weekStartsOn={weekStartsOn}\n          onKeyDown={handleKeyDown}\n          isDayFocused={isDayFocused}\n          onDayChange={onDayChange}\n          isDaySelected={isDaySelected}\n          isDayActive={isDayActive}\n          isDaySelectionEnd={isDaySelectionEnd}\n          isDaySelectionStart={isDaySelectionStart}\n          isDayHinted={isDayHinted}\n          onDayEnter={onDayEnter}\n          onDayLeave={onDayLeave}\n          isHintedDaySelectionEnd={isHintedDaySelectionEnd}\n          isHintedDaySelectionStart={isHintedDaySelectionStart}\n          isDayDisabled={isDayDisabled}\n          listenDayChangesForUpdate={listenDayChangesForUpdate}\n          aria-label={changeDayAriaLabel}\n        />\n      </div>\n      <div className={styles['CalendarRange__inner']}>\n        <CalendarHeader\n          viewDate={secondViewDate}\n          onChange={setViewDate}\n          prevMonth={false}\n          onNextMonth={setNextMonth}\n          disablePickers={disablePickers}\n          className={styles['CalendarRange__header']}\n          prevMonthAriaLabel={prevMonthAriaLabel}\n          nextMonthAriaLabel={nextMonthAriaLabel}\n          changeMonthAriaLabel={changeMonthAriaLabel}\n          changeYearAriaLabel={changeYearAriaLabel}\n          nextMonthIcon={nextMonthIcon}\n        />\n        <CalendarDays\n          viewDate={secondViewDate}\n          value={value}\n          weekStartsOn={weekStartsOn}\n          aria-label={changeDayAriaLabel}\n          onKeyDown={handleKeyDown}\n          isDayFocused={isDayFocused}\n          onDayChange={onDayChange}\n          isDaySelected={isDaySelected}\n          isDayActive={isDayActive}\n          isDaySelectionEnd={isDaySelectionEnd}\n          isDaySelectionStart={isDaySelectionStart}\n          isDayHinted={isDayHinted}\n          onDayEnter={onDayEnter}\n          onDayLeave={onDayLeave}\n          isHintedDaySelectionEnd={isHintedDaySelectionEnd}\n          isHintedDaySelectionStart={isHintedDaySelectionStart}\n          isDayDisabled={isDayDisabled}\n          listenDayChangesForUpdate={listenDayChangesForUpdate}\n          tabIndex={0}\n          onBlur={resetSelectedDay}\n        />\n      </div>\n    </RootComponent>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}