{"ast":null,"code":"import * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useEventListener } from \"../../hooks/useEventListener\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { stopPropagation } from \"../../lib/utils\";\nimport { useTrackerVisibility } from \"./useTrackerVisibility\";\nexport var CustomScrollView = function CustomScrollView(param) {\n  var className = param.className,\n      children = param.children,\n      externalBoxRef = param.boxRef,\n      windowResize = param.windowResize,\n      _param_autoHideScrollbar = param.autoHideScrollbar,\n      autoHideScrollbar = _param_autoHideScrollbar === void 0 ? false : _param_autoHideScrollbar,\n      autoHideScrollbarDelay = param.autoHideScrollbarDelay,\n      onScroll = param.onScroll;\n\n  var subscribe = function subscribe(el) {\n    if (el) {\n      listeners.forEach(function (l) {\n        return l.add(el);\n      });\n    }\n  };\n\n  var unsubscribe = function unsubscribe() {\n    listeners.forEach(function (l) {\n      return l.remove();\n    });\n  };\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document,\n      window = _useDOM.window;\n\n  var ratio = React.useRef(NaN);\n  var lastTrackerTop = React.useRef(0);\n  var clientHeight = React.useRef(0);\n  var trackerHeight = React.useRef(0);\n  var scrollHeight = React.useRef(0);\n  var transformProp = React.useRef(\"\");\n  var startY = React.useRef(0);\n  var trackerTop = React.useRef(0);\n  var boxRef = useExternRef(externalBoxRef);\n  var barY = React.useRef(null);\n  var trackerY = React.useRef(null);\n\n  var setTrackerPosition = function setTrackerPosition(scrollTop) {\n    lastTrackerTop.current = scrollTop;\n\n    if (trackerY.current !== null) {\n      trackerY.current.style[transformProp.current] = \"translate(0, \".concat(scrollTop, \"px)\");\n    }\n  };\n\n  var setTrackerPositionFromScroll = function setTrackerPositionFromScroll(scrollTop) {\n    var progress = scrollTop / (scrollHeight.current - clientHeight.current);\n    setTrackerPosition((clientHeight.current - trackerHeight.current) * progress);\n  };\n\n  var resize = function resize() {\n    if (!boxRef.current || !barY.current || !trackerY.current) {\n      return;\n    }\n\n    var localClientHeight = boxRef.current.clientHeight;\n    var localScrollHeight = boxRef.current.scrollHeight;\n    var localRatio = localClientHeight / localScrollHeight;\n    var localTrackerHeight = Math.max(localClientHeight * localRatio, 40);\n    ratio.current = localRatio;\n    clientHeight.current = localClientHeight;\n    scrollHeight.current = localScrollHeight;\n    trackerHeight.current = localTrackerHeight;\n\n    if (localRatio >= 1) {\n      barY.current.style.display = \"none\";\n    } else {\n      barY.current.style.display = \"\";\n      trackerY.current.style.height = \"\".concat(localTrackerHeight, \"px\");\n      setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    }\n  };\n\n  var resizeHandler = useEventListener(\"resize\", resize);\n  useIsomorphicLayoutEffect(function () {\n    if (windowResize && window) {\n      resizeHandler.add(window);\n    }\n  }, [windowResize, window]);\n  useIsomorphicLayoutEffect(function () {\n    var _trackerY_current;\n\n    var style = (_trackerY_current = trackerY.current) === null || _trackerY_current === void 0 ? void 0 : _trackerY_current.style;\n    var prop = \"\";\n\n    if (style !== undefined) {\n      if (\"transform\" in style) {\n        prop = \"transform\";\n      } else if (\"webkitTransform\" in style) {\n        prop = \"webkitTransform\";\n      }\n    }\n\n    transformProp.current = prop;\n  }, []);\n  useIsomorphicLayoutEffect(resize);\n\n  var setScrollPositionFromTracker = function setScrollPositionFromTracker(trackerTop) {\n    var progress = trackerTop / (clientHeight.current - trackerHeight.current);\n\n    if (boxRef.current !== null) {\n      boxRef.current.scrollTop = (scrollHeight.current - clientHeight.current) * progress;\n    }\n  };\n\n  var onMove = function onMove(e) {\n    e.preventDefault();\n    var diff = e.clientY - startY.current;\n    var position = Math.min(Math.max(trackerTop.current + diff, 0), clientHeight.current - trackerHeight.current);\n    setScrollPositionFromTracker(position);\n  };\n\n  var _useTrackerVisibility = useTrackerVisibility(autoHideScrollbar, autoHideScrollbarDelay),\n      trackerVisible = _useTrackerVisibility.trackerVisible,\n      onTargetScroll = _useTrackerVisibility.onTargetScroll,\n      onTrackerDragStart = _useTrackerVisibility.onTrackerDragStart,\n      onTrackerDragStop = _useTrackerVisibility.onTrackerDragStop,\n      onTrackerMouseEnter = _useTrackerVisibility.onTrackerMouseEnter,\n      onTrackerMouseLeave = _useTrackerVisibility.onTrackerMouseLeave;\n\n  var onUp = function onUp(e) {\n    e.preventDefault();\n\n    if (autoHideScrollbar) {\n      onTrackerDragStop();\n    }\n\n    unsubscribe();\n  };\n\n  var scroll = function scroll(event) {\n    var _onScroll;\n\n    if (ratio.current >= 1 || !boxRef.current) {\n      return;\n    }\n\n    if (autoHideScrollbar) {\n      onTargetScroll();\n    }\n\n    setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    (_onScroll = onScroll) === null || _onScroll === void 0 ? void 0 : _onScroll(event);\n  };\n\n  var listeners = [useEventListener(\"mousemove\", onMove), useEventListener(\"mouseup\", onUp)];\n\n  var onDragStart = function onDragStart(e) {\n    e.preventDefault();\n    startY.current = e.clientY;\n    trackerTop.current = lastTrackerTop.current;\n\n    if (autoHideScrollbar) {\n      onTrackerDragStart();\n    }\n\n    subscribe(document);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiCustomScrollView\", className)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomScrollView__box\",\n    tabIndex: -1,\n    ref: boxRef,\n    onScroll: scroll\n  }, children), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomScrollView__barY\",\n    ref: barY,\n    onClick: stopPropagation\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiCustomScrollView__trackerY\", !trackerVisible && \"vkuiCustomScrollView__trackerY--hidden\"),\n    onMouseEnter: autoHideScrollbar ? onTrackerMouseEnter : undefined,\n    onMouseLeave: autoHideScrollbar ? onTrackerMouseLeave : undefined,\n    ref: trackerY,\n    onMouseDown: onDragStart\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","classNames","useEventListener","useExternRef","useDOM","useIsomorphicLayoutEffect","stopPropagation","useTrackerVisibility","CustomScrollView","className","children","boxRef","externalBoxRef","windowResize","autoHideScrollbar","_param_autoHideScrollbar","autoHideScrollbarDelay","onScroll","subscribe","el","listeners","forEach","l","add","unsubscribe","remove","document","window","ratio","useRef","NaN","lastTrackerTop","clientHeight","trackerHeight","scrollHeight","transformProp","startY","trackerTop","barY","trackerY","setTrackerPosition","scrollTop","current","style","concat","setTrackerPositionFromScroll","progress","resize","localClientHeight","localScrollHeight","localRatio","localTrackerHeight","Math","max","display","height","resizeHandler","prop","undefined","setScrollPositionFromTracker","onMove","e","preventDefault","diff","clientY","position","min","trackerVisible","onTargetScroll","onTrackerDragStart","onTrackerDragStop","onTrackerMouseEnter","onTrackerMouseLeave","onUp","scroll","event","onDragStart","div","tabIndex","ref","onClick","onMouseEnter","onMouseLeave","onMouseDown"],"sources":["C:\\Users\\Ð¯\\Desktop\\myproject\\vk-miniapps\\Koto-app\\node_modules\\@vkontakte\\vkui\\src\\components\\CustomScrollView\\CustomScrollView.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { DOMProps, useDOM } from '../../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { stopPropagation } from '../../lib/utils';\nimport { TrackerOptionsProps, useTrackerVisibility } from './useTrackerVisibility';\nimport styles from './CustomScrollView.module.css';\n\nexport interface CustomScrollViewProps extends DOMProps, TrackerOptionsProps {\n  windowResize?: boolean;\n  boxRef?: React.Ref<HTMLDivElement>;\n  className?: HTMLDivElement['className'];\n  onScroll?(event: React.UIEvent<HTMLDivElement>): void;\n  children: React.ReactNode;\n}\n\nexport const CustomScrollView = ({\n  className,\n  children,\n  boxRef: externalBoxRef,\n  windowResize,\n  autoHideScrollbar = false,\n  autoHideScrollbarDelay,\n  onScroll,\n}: CustomScrollViewProps) => {\n  const { document, window } = useDOM();\n\n  const ratio = React.useRef(NaN);\n  const lastTrackerTop = React.useRef(0);\n  const clientHeight = React.useRef(0);\n  const trackerHeight = React.useRef(0);\n  const scrollHeight = React.useRef(0);\n  const transformProp = React.useRef('');\n  const startY = React.useRef(0);\n  const trackerTop = React.useRef(0);\n\n  const boxRef = useExternRef(externalBoxRef);\n\n  const barY = React.useRef<HTMLDivElement>(null);\n  const trackerY = React.useRef<HTMLDivElement>(null);\n\n  const setTrackerPosition = (scrollTop: number) => {\n    lastTrackerTop.current = scrollTop;\n    if (trackerY.current !== null) {\n      (trackerY.current.style as any)[transformProp.current] = `translate(0, ${scrollTop}px)`;\n    }\n  };\n\n  const setTrackerPositionFromScroll = (scrollTop: number) => {\n    const progress = scrollTop / (scrollHeight.current - clientHeight.current);\n    setTrackerPosition((clientHeight.current - trackerHeight.current) * progress);\n  };\n\n  const resize = () => {\n    if (!boxRef.current || !barY.current || !trackerY.current) {\n      return;\n    }\n    const localClientHeight = boxRef.current.clientHeight;\n    const localScrollHeight = boxRef.current.scrollHeight;\n    const localRatio = localClientHeight / localScrollHeight;\n    const localTrackerHeight = Math.max(localClientHeight * localRatio, 40);\n\n    ratio.current = localRatio;\n    clientHeight.current = localClientHeight;\n    scrollHeight.current = localScrollHeight;\n    trackerHeight.current = localTrackerHeight;\n\n    if (localRatio >= 1) {\n      barY.current.style.display = 'none';\n    } else {\n      barY.current.style.display = '';\n      trackerY.current.style.height = `${localTrackerHeight}px`;\n      setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    }\n  };\n\n  const resizeHandler = useEventListener('resize', resize);\n\n  useIsomorphicLayoutEffect(() => {\n    if (windowResize && window) {\n      resizeHandler.add(window);\n    }\n  }, [windowResize, window]);\n\n  useIsomorphicLayoutEffect(() => {\n    let style = trackerY.current?.style;\n    let prop = '';\n    if (style !== undefined) {\n      if ('transform' in style) {\n        prop = 'transform';\n      } else if ('webkitTransform' in style) {\n        prop = 'webkitTransform';\n      }\n    }\n    transformProp.current = prop;\n  }, []);\n\n  useIsomorphicLayoutEffect(resize);\n\n  const setScrollPositionFromTracker = (trackerTop: number) => {\n    const progress = trackerTop / (clientHeight.current - trackerHeight.current);\n    if (boxRef.current !== null) {\n      boxRef.current.scrollTop = (scrollHeight.current - clientHeight.current) * progress;\n    }\n  };\n\n  const onMove = (e: MouseEvent) => {\n    e.preventDefault();\n    const diff = e.clientY - startY.current;\n    const position = Math.min(\n      Math.max(trackerTop.current + diff, 0),\n      clientHeight.current - trackerHeight.current,\n    );\n\n    setScrollPositionFromTracker(position);\n  };\n\n  const {\n    trackerVisible,\n    onTargetScroll,\n    onTrackerDragStart,\n    onTrackerDragStop,\n    onTrackerMouseEnter,\n    onTrackerMouseLeave,\n  } = useTrackerVisibility(autoHideScrollbar, autoHideScrollbarDelay);\n\n  const onUp = (e: MouseEvent) => {\n    e.preventDefault();\n\n    if (autoHideScrollbar) {\n      onTrackerDragStop();\n    }\n\n    unsubscribe();\n  };\n\n  const scroll = (event: React.UIEvent<HTMLDivElement>) => {\n    if (ratio.current >= 1 || !boxRef.current) {\n      return;\n    }\n\n    if (autoHideScrollbar) {\n      onTargetScroll();\n    }\n\n    setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    onScroll?.(event);\n  };\n\n  const listeners = [useEventListener('mousemove', onMove), useEventListener('mouseup', onUp)];\n\n  function subscribe(el: Document | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  const onDragStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    startY.current = e.clientY;\n    trackerTop.current = lastTrackerTop.current;\n\n    if (autoHideScrollbar) {\n      onTrackerDragStart();\n    }\n\n    subscribe(document);\n  };\n\n  return (\n    <div className={classNames(styles['CustomScrollView'], className)}>\n      <div className={styles['CustomScrollView__box']} tabIndex={-1} ref={boxRef} onScroll={scroll}>\n        {children}\n      </div>\n\n      <div className={styles['CustomScrollView__barY']} ref={barY} onClick={stopPropagation}>\n        <div\n          className={classNames(\n            styles['CustomScrollView__trackerY'],\n            !trackerVisible && styles['CustomScrollView__trackerY--hidden'],\n          )}\n          onMouseEnter={autoHideScrollbar ? onTrackerMouseEnter : undefined}\n          onMouseLeave={autoHideScrollbar ? onTrackerMouseLeave : undefined}\n          ref={trackerY}\n          onMouseDown={onDragStart}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}